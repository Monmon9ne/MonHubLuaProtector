<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mon Lua Protector - RAW Creator</title>
<style>
body { background: #0a0a0a; color: #00eaff; font-family: monospace; padding: 20px;}
input, textarea { width:100%; padding:10px; margin-top:10px; background:#111; border:1px solid #00eaff; color:#00eaff;}
button { background:#00eaff; color:#000; border:none; padding:10px 20px; margin-top:10px; cursor:pointer; font-weight:bold;}
</style>
</head>
<body>

<h1>Mon Lua Protector - RAW Creator</h1>

<input type="file" id="fileInput">
<textarea id="codeInput" placeholder="Paste Lua code here..."></textarea>
<input type="password" id="passwordInput" placeholder="Enter password">
<button onclick="createRAW()">Create RAW</button>

<h3>Output</h3>
<input id="rawLink" readonly>
<button onclick="copy('rawLink')">Copy Link</button>

<input id="loadstringLink" readonly>
<button onclick="copy('loadstringLink')">Copy Loadstring</button>

<script>
document.getElementById("fileInput").addEventListener("change", async (e) => {
    const file = e.target.files[0];
    if(file) document.getElementById("codeInput").value = await file.text();
});

async function createRAW() {
    const code = document.getElementById("codeInput").value.trim();
    const password = document.getElementById("passwordInput").value.trim();
    if(!code || !password) return alert("Missing code or password");

    const res = await fetch('/api/create-raw', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({code, password})
    });

    const data = await res.json();
    if(data.error) return alert(data.error);

    document.getElementById("rawLink").value = data.link;
    document.getElementById("loadstringLink").value = data.loadstring;
}

function copy(id) {
    const x = document.getElementById(id);
    x.select();
    navigator.clipboard.writeText(x.value);
}
</script>

</body>
</html>
