<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mon Lua Protector - RAW Creator</title>
<style>
body { background: #0a0a0a; font-family: Consolas, monospace; color: #00eaff; padding: 20px; }
h1 { text-shadow: 0 0 5px #00eaff; }
.box { background: #111; border: 1px solid #00eaff; border-radius: 10px; padding: 15px; margin-top: 15px; }
textarea, input { width: 100%; padding: 10px; background: #000; color: #00eaff; border: 1px solid #00eaff; border-radius: 8px; margin-top: 8px; font-family: Consolas, monospace; }
button { margin-top: 12px; width: 100%; padding: 12px; background: #00eaff; border: none; border-radius: 8px; color: #000; font-weight: bold; cursor: pointer; }
#rawInfo { margin-top: 15px; background: #111; padding: 10px; border-radius: 8px; border: 1px solid #00eaff; display: none; }
</style>
</head>
<body>

<h1>Mon Lua Protector - RAW Creator</h1>

<div class="box">
    <label>Upload File:</label>
    <input type="file" id="fileInput" />
</div>

<div class="box">
    <label>Or Paste Code:</label>
    <textarea id="codeBox" rows="10" placeholder="Paste Lua code..."></textarea>
</div>

<div class="box">
    <label>Password:</label>
    <input type="text" id="passwordBox" placeholder="Enter password" />
</div>

<button onclick="createRaw()">Create RAW</button>

<div id="rawInfo">
    <p>RAW ID: <span id="rawId"></span></p>
    <button onclick="copyRawUrl()">Copy RAW URL</button>
    <button onclick="copyLoadstring()">Copy Loadstring</button>
</div>

<script>
document.getElementById("fileInput").addEventListener("change", async (e) => {
    const file = e.target.files[0];
    if (!file) return;
    const text = await file.text();
    document.getElementById("codeBox").value = text;
});

function createRaw() {
    const code = document.getElementById("codeBox").value.trim();
    const pwd = document.getElementById("passwordBox").value.trim();
    if (!code) return alert("Code required!");
    if (!pwd) return alert("Password required!");

    const id = Date.now().toString();
    document.getElementById("rawId").textContent = id;
    document.getElementById("rawInfo").style.display = "block";

    // Tạo file HTML embed trực tiếp
    const rawHtml = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mon Lua Protector - RAW</title>
<style>
body { background: #0a0a0a; font-family: Consolas, monospace; color: #00eaff; padding: 20px; }
h1 { text-shadow: 0 0 5px #00eaff; }
pre { background: #111; padding: 15px; border-radius: 8px; border: 1px solid #00eaff; white-space: pre-wrap; word-wrap: break-word; }
</style>
</head>
<body>
<h1>Mon Lua Protector</h1>
<p>Password required: ${pwd}</p>
<pre>${code}</pre>
</body>
</html>`;

    const blob = new Blob([rawHtml], { type: "text/html" });
    const url = URL.createObjectURL(blob);

    document.getElementById("rawUrlLink")?.remove();
    const a = document.createElement("a");
    a.id = "rawUrlLink";
    a.href = url;
    a.target = "_blank";
    a.textContent = "Open RAW";
    a.style.display = "block";
    a.style.marginTop = "10px";
    document.getElementById("rawInfo").appendChild(a);
}

function copyRawUrl() {
    const a = document.getElementById("rawUrlLink");
    if (!a) return alert("Create RAW first!");
    navigator.clipboard.writeText(a.href).then(() => alert("RAW URL copied!"));
}

function copyLoadstring() {
    const a = document.getElementById("rawUrlLink");
    if (!a) return alert("Create RAW first!");
    const loadstringCode = `loadstring(game:HttpGet("${a.href}"))()`;
    navigator.clipboard.writeText(loadstringCode).then(() => alert("Loadstring copied!"));
}
</script>

</body>
</html>
